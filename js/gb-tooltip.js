function initTooltip(){const t=document.querySelector(".custom-tooltip");if(!t)return;let e=null;const o=matchMedia("(hover: hover)").matches;t.style.maxWidth||="200px",t.style.whiteSpace||="pre-wrap",t.style.overflowWrap||="break-word",t.style.opacity||="0";let n=null,i={top:null,left:null};function l(){null!=i.top&&null!=i.left&&(t.style.top=`${i.top}px`,t.style.left=`${i.left}px`)}function s(s,d){o&&(clearTimeout(e),n=s,t.textContent=d,t.style.opacity="1",i=function(e){t.style.top="-9999px",t.style.left="-9999px",t.classList.remove("bottom"),t.offsetHeight;const o=e.getBoundingClientRect(),n=t.getBoundingClientRect();let i=o.top-n.height-10;o.top<=n.height+10&&(t.classList.add("bottom"),i=o.bottom+10);let l=o.left+o.width/2-n.width/2;return l=Math.max(8,Math.min(l,window.innerWidth-n.width-8)),{top:Math.round(i),left:Math.round(l)}}(s),l())}function d(){e=setTimeout(()=>{t.style.opacity="0",t.classList.remove("bottom"),n=null,i={top:null,left:null}},80)}function a(t=document){t.querySelectorAll("[gbtip], [data-tooltip]").forEach(t=>{if(t.dataset.tooltipBound)return;t.dataset.tooltipBound="true";const e=t.getAttribute("gbtip")||t.getAttribute("data-tooltip");e&&o&&(t.addEventListener("mouseenter",()=>s(t,e)),t.addEventListener("mouseleave",d))})}function r(){if(!n||"0"===t.style.opacity||!n.isConnected)return;const e=n.getBoundingClientRect(),o=window.getComputedStyle(n),i="fixed"===o.position||"sticky"===o.position,s=e.bottom>0&&e.right>0&&e.top<window.innerHeight&&e.left<window.innerWidth;i||s?l():d()}a(),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),window.addEventListener("pjax:send",d),window.addEventListener("pjax:success",()=>{a(document)})}document.addEventListener("DOMContentLoaded",initTooltip);