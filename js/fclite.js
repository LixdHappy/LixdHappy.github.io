function initialize_fc_lite(){const e=document.getElementById("friend-circle-lite-root");if(!e)return;e.innerHTML="";const n=document.createElement("div");n.id="random-article",e.appendChild(n);const t=document.createElement("div");t.className="articles-container",t.id="articles-container",e.appendChild(t);const i=document.createElement("button");i.id="load-more-btn",i.innerText="再来亿点",e.appendChild(i);const a=document.createElement("div");a.id="stats-container",e.appendChild(a);let o=0,r=[];function d(){const e="friend-circle-lite-cache",n="friend-circle-lite-cache-time",t=localStorage.getItem(n),a=(new Date).getTime();if(t&&a-t<6e5){const n=JSON.parse(localStorage.getItem(e));if(n)return void c(n)}fetch(`${UserConfig.private_api_url}all.json`).then(e=>e.json()).then(t=>{localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(n,a.toString()),c(t)}).finally(()=>{i.innerText="再来亿点"})}function c(e){r=e.article_data;const n=e.statistical_data;a.innerHTML=`\n            <div>Powered by: <a href="https://github.com/willow-god/Friend-Circle-Lite" target="_blank" rel="nofollow">FriendCircleLite</a><br></div>\n            <div>Designed By: <a href="https://www.liushen.fun/" target="_blank" rel="nofollow">LiuShen</a><br></div>\n            <div>订阅:${n.friends_num}   活跃:${n.active_num}   总文章数:${n.article_num}<br></div>\n            <div>更新时间:${n.last_updated_time}</div>\n        `,l();const d=document.createDocumentFragment();r.slice(o,o+UserConfig.page_turning_number).forEach(e=>{const n=document.createElement("div");n.className="card";const t=document.createElement("div");t.className="card-title",t.innerText=e.title,n.appendChild(t),t.onclick=()=>window.open(e.link,"_blank");const i=document.createElement("div");i.className="card-author";const a=document.createElement("img");a.className="no-lightbox",a.src=e.avatar||UserConfig.error_img,a.onerror=()=>a.src=UserConfig.error_img,i.appendChild(a),i.appendChild(document.createTextNode(e.author)),n.appendChild(i),i.onclick=()=>{!function(e,n,t){if(!document.getElementById("modal")){const e=document.createElement("div");e.id="modal",e.className="modal",e.innerHTML='\n            <div class="modal-content">\n                <img id="modal-author-avatar" src="" alt="">\n                <a id="modal-author-name-link"></a>\n                <div id="modal-articles-container"></div>\n                <img class="modal-background" src="" alt="">\n            </div>\n            ',document.body.appendChild(e)}const i=document.getElementById("modal"),a=document.getElementById("modal-articles-container"),o=document.getElementById("modal-author-avatar"),d=document.getElementById("modal-author-name-link"),c=document.querySelector(".modal-background");a.innerHTML="",o.src=n||UserConfig.error_img,o.onerror=()=>o.src=UserConfig.error_img,d.innerText=e,d.href=new URL(t).origin,c.src=n||UserConfig.error_img,c.onerror=()=>c.src=UserConfig.error_img;const l=r.filter(n=>n.author===e);l.slice(0,5).forEach(e=>{const n=document.createElement("div");n.className="modal-article";const t=document.createElement("a");t.className="modal-article-title",t.innerText=e.title,t.href=e.link,t.target="_blank",n.appendChild(t);const i=document.createElement("div");i.className="modal-article-date",i.innerText="📅"+e.created.substring(0,10),n.appendChild(i),a.appendChild(n)}),i.style.display="block",setTimeout(()=>{i.classList.add("modal-open")},10)}(e.author,e.avatar,e.link)};const o=document.createElement("div");o.className="card-date",o.innerText="🗓️"+e.created.substring(0,10),n.appendChild(o);const c=document.createElement("img");c.className="card-bg no-lightbox",c.src=e.avatar||UserConfig.error_img,c.onerror=()=>c.src=UserConfig.error_img,n.appendChild(c),d.appendChild(n)}),t.appendChild(d),o+=UserConfig.page_turning_number,o>=r.length&&(i.style.display="none")}function l(){const e=r[Math.floor(Math.random()*r.length)];n.innerHTML=`\n            <div class="random-container">\n                <div class="random-container-title">\n                    <span>🎣 钓鱼</span>\n                    <span class="random-refresh" onclick="updateRandomArticle()">\n                        <svg t="1721999754997" class="icon" viewBox="0 0 1024 1024" version="1.1" p-id="1207" width="16" height="16"><path d="M772.6 320H672c-35.4 0-64 28.6-64 64s28.6 64 64 64h256c35.4 0 64-28.6 64-64V128c0-35.4-28.6-64-64-64s-64 28.6-64 64v102.4l-35.2-35.2c-175-175-458.6-175-633.6 0s-175 458.6 0 633.6 458.6 175 633.6 0c25-25 25-65.6 0-90.6s-65.6-25-90.6 0c-125 125-327.6 125-452.6 0s-125-327.6 0-452.6 327.6-125 452.6 0l34.4 34.4z" p-id="1208"></path></svg>\n                    </span>\n                </div>\n                <div class="random-title">${e.title}</div>\n                <div class="random-author">作者: ${e.author}</div>\n            </div>\n            <button class="random-link-button" onclick="window.open('${e.link}', '_blank')">过去转转</button>\n        `}d(),i.addEventListener("click",d),window.updateRandomArticle=l,window.onclick=function(e){const n=document.getElementById("modal");e.target===n&&function(){const e=document.getElementById("modal");e.classList.remove("modal-open"),e.addEventListener("transitionend",()=>{e.style.display="none",document.body.removeChild(e)},{once:!0})}()}}document.addEventListener("DOMContentLoaded",function(){setTimeout(initialize_fc_lite,0)}),document.addEventListener("pjax:complete",function(){setTimeout(initialize_fc_lite,0)}),setTimeout(initialize_fc_lite,0);