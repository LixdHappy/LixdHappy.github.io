function addStatusTagsWithCache(t){const e="statusTagsData";function a(t){document.querySelectorAll(".flink-list-item .status-tag").forEach(t=>t.remove());const e=t.link_status,s=document.querySelectorAll(".flink-list-item");s.length?s.forEach(t=>{const a=t.querySelector("a");if(!a||!a.href)return;const s=a.href.replace(/\/$/,"").toLowerCase(),n=document.createElement("div");n.classList.add("status-tag");const o=e.find(t=>s.includes(t.link.replace(/\/$/,"").toLowerCase()));if(o){let e="未知",a="status-tag-red";o.latency>=0&&(e=o.latency.toFixed(2)+" s",o.latency<=2?a="status-tag-green":o.latency<=5?a="status-tag-light-yellow":o.latency<=10&&(a="status-tag-dark-yellow")),n.textContent=e,n.classList.add(a),t.style.position="relative",t.appendChild(n)}}):location.pathname.includes("/link/")&&setTimeout(()=>a(t),500)}if(!location.pathname.includes("/link/"))return;const s=localStorage.getItem(e);if(s){const{data:t,timestamp:e}=JSON.parse(s);Date.now()-e<18e5&&a(t)}fetch(t+"?t="+Date.now()).then(t=>t.json()).then(t=>{a(t);const s={data:t,timestamp:Date.now()};localStorage.setItem(e,JSON.stringify(s))}).catch(t=>console.error("❌ 获取 result.json 出错:",t))}document.addEventListener("DOMContentLoaded",()=>{addStatusTagsWithCache("https://fca.gbfun.cc/result.json")}),document.addEventListener("pjax:complete",()=>{addStatusTagsWithCache("https://fca.gbfun.cc/result.json")});